<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
          integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
          crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    <link href="/css/init.css" rel="stylesheet">
    <script src="https://kit.fontawesome.com/5547fa07a6.js" crossorigin="anonymous"></script>

</head>
<body>
    <header>
    <h3 class="h3 m-3">십시일반조</h3>
    <div class="d-flex justify-content-around mt-5">
            <h1 class="hidden">hide</h1>
            <h1 class="h1">텐스레드</h1>
                <button class="fa-solid fa-square-arrow-up-right fs-3" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight"></button>
                <div>
                    <button class="signup-button" onclick="location.href='/main/signup'">회원가입</button>
                    <button class="login-button" onclick="location.href='/main/login'">로그인</button>
                    <button href="#" class="logout-button" style="display: none;">로그아웃</button>
                    <button class="profile-button" onclick="location.href='/main/profile'">프로필</button>
                    <button class="post-button" onclick="location.href='/main/createPost'">게시글 추가</button>
                </div>
                <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
                    <div class="offcanvas-header">
                        <h5 class="offcanvas-title mx-auto" id="userManagementOffcanvasLabel">유저이름</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>
                    <div class="offcanvas-body">
                        <img src="https://cdn.icon-icons.com/icons2/3054/PNG/512/account_profile_user_icon_190494.png" class="border border-2 rounded-circle d-block mx-auto" alt="" width="200px" height="200px">

                        <!-- User and Notice Management content goes here -->
                        <ul class="mt-5">
                            <li><a href="#" class="fs-5">~</a></li>
                            <li><a href="#" class="fs-5">~</a></li>
                            <!-- Add more management options here -->
                        </ul>
                    </div>
                    <div class="offcanvas-footer mt-auto">
                        <hr class="hr">
                        <a href="/logout" class="fs-5 ms-2">로그아웃</a>
                    </div>
                </div>
            </div>
        </header>
    <div class="container" id="base-box">
        <!-- 여기부터 복사 -->
        <div class="user-info-box">
            <img src="https://search.pstatic.net/common/?src=http%3A%2F%2Fblogfiles.naver.net%2FMjAyMzA1MjhfMTg1%2FMDAxNjg1MjA0NDA2MDQy.LB8liO5OOV8w2E3Vigo2rIp2GWWdRxCXNtB4ONDKVw4g.TrKoUX9P2cyv31uMXAqQyOr60LDPMLLY8PfL1AF0YP8g.JPEG.s422889%2F20230528%25A3%25DF001343.jpg&type=sc960_832" width="50" height="50" alt="" class="me-2 rounded-circle border">
            <span class="me-2">유저이름</span>
            <button onclick="" class="me-2 btn btn-primary">팔로우</button>
        </div>
        <div class="row mt-5">
            <div class="col-md-8">
                <img src="https://search.pstatic.net/common/?src=http%3A%2F%2Fblogfiles.naver.net%2F20160608_231%2Fcosmeplanb_1465358154705LzIRU_JPEG%2F%25B4%25DA%25C5%25CD%25C0%25DA%25B8%25A3%25C6%25AE_%25BC%25BC%25B6%25F3%25B8%25B6%25C0%25CC%25B5%25F2_2%25C1%25BE_01.jpg&type=sc960_832" alt="" width="500" height="500" class="rounded">
            </div>
            <div class="col-md-4" id="comment-base-box-1">
                <span class="fs-4">댓글 수 0</span>
                <!-- 여기부터 복사 -->
                <div class="comment-box mt-3 d-flex ">
                    <div class="col-md-3">
                        <span class="fw-bold">유저이름</span>
                    </div>
                    <div class="col-md-8"><span>내용샘플 내용샘플 내용샘플 내용샘플 </span></div>
                    <button onclick="" class="d-flex fa-solid fa-heart align-item-start mt-1" style="color:red"></button>
                </div>
                <div class="text-end" style="color: #949494;">
                    <span>1 like</span>
                    <span>comment</span>
                </div>
                <!-- 여기까지 복사 -->
            </div>
            <div class="col-md-12 mt-3 fs-5">
                <p>내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 </p>
            </div>
            <div class="d-flex like-box">
                <button onclick="" class="d-inline-block fa-solid fa-heart fs-5 me-2" style="color:red"></button>
                <div class="text-start fs-5" style="color: #949494;">
                    <span>1 like</span>
                    <span>post</span>
                </div>
            </div>
        </div>
        <hr class="hr my-5" >
        <!-- 여기까지 복사 -->
        <div class="user-info-box">
            <img src="https://search.pstatic.net/common/?src=http%3A%2F%2Fblogfiles.naver.net%2FMjAyMzA1MjhfMTg1%2FMDAxNjg1MjA0NDA2MDQy.LB8liO5OOV8w2E3Vigo2rIp2GWWdRxCXNtB4ONDKVw4g.TrKoUX9P2cyv31uMXAqQyOr60LDPMLLY8PfL1AF0YP8g.JPEG.s422889%2F20230528%25A3%25DF001343.jpg&type=sc960_832" width="50" height="50" alt="" class="me-2 rounded-circle border">
            <span class="me-2">유저이름</span>
            <button onclick="" class="me-2 btn btn-primary">팔로우</button>
        </div>
        <div class="row mt-5">
            <div class="col-md-8">
                <img src="https://search.pstatic.net/common/?src=http%3A%2F%2Fblogfiles.naver.net%2F20160608_231%2Fcosmeplanb_1465358154705LzIRU_JPEG%2F%25B4%25DA%25C5%25CD%25C0%25DA%25B8%25A3%25C6%25AE_%25BC%25BC%25B6%25F3%25B8%25B6%25C0%25CC%25B5%25F2_2%25C1%25BE_01.jpg&type=sc960_832" alt="" width="500" height="500" class="rounded">
            </div>
            <div class="col-md-4" id="comment-base-box-2">
                <span class="fs-4">댓글 수 0</span>
                <!-- 여기부터 복사 -->
                <div class="comment-box mt-3 d-flex ">
                    <div class="col-md-3">
                        <span class="fw-bold">유저이름</span>
                    </div>
                    <div class="col-md-8"><span>내용샘플 내용샘플 내용샘플 내용샘플 </span></div>
                    <button onclick="" class="d-flex fa-solid fa-heart align-item-start mt-1" style="color:red"></button>
                </div>
                <div class="text-end" style="color: #949494;">
                    <span>1 like</span>
                    <span>comment</span>
                </div>
                <!-- 여기까지 복사 -->
            </div>
            <div class="col-md-12 mt-3 fs-5">
                <p>내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 내용샘플 </p>
            </div>
            <div class="d-flex like-box">
                <button onclick="" class="d-inline-block fa-solid fa-heart fs-5 me-2" style="color:red"></button>
                <div class="text-start fs-5" style="color: #949494;">
                    <span>1 like</span>
                    <span>post</span>
                </div>
            </div>
        </div>
        <hr class="hr my-5" >
    </div>
<script>

    document.addEventListener('DOMContentLoaded', function() {
        updateLoginStatus();
    });

    function getCookieValueByName(name) {
        var cookie = document.cookie;
        var cookiePairs = cookie.split(';');

        for (var i = 0; i < cookiePairs.length; i++) {
            var pair = cookiePairs[i].trim();
            if (pair.startsWith(name + '=')) {
                return pair.substring(name.length + 1);
            }
        }

        return null;
    }

    function isLoggedIn() {
        var jwtCookie = getCookieValueByName('jwt');

        return !!jwtCookie; // JWT 쿠키가 존재하면 true, 그렇지 않으면 false 반환
    }

    function updateLoginStatus() {
        if (isLoggedIn()) {
            // JWT 값을 추출하여 로그인 상태로 인식합니다.
            document.querySelector('.login-button').style.display = 'none';
            document.querySelector('.signup-button').style.display = 'none';
            document.querySelector('.logout-button').style.display = 'inline-block';
            document.querySelector('.profile-button').style.display = 'inline-block';
            document.querySelector('.post-button').style.display = 'inline-block';
        } else {
            // JWT 값이 없으면 비로그인 상태로 인식합니다.
            document.querySelector('.login-button').style.display = 'inline-block';
            document.querySelector('.signup-button').style.display = 'inline-block';
            document.querySelector('.logout-button').style.display = 'none';
            document.querySelector('.profile-button').style.display = 'none';
            document.querySelector('.post-button').style.display = 'none';
        }
    }


    document.querySelector('.logout-button').addEventListener('click', function() {
        logout();
    });

    // 로그아웃 요청 함수
    function logout() {
        // 로그아웃 요청을 보내는 코드를 작성합니다.
        fetch('/logout', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
        })
            .then(response => response.json())
            .then(data => {
                // 로그아웃이 성공한 경우에 대한 처리를 수행합니다.
                // 예를 들어, 로그아웃 성공 메시지를 표시하거나 홈페이지로 리다이렉트할 수 있습니다.
                console.log(data.message); // 로그아웃 성공 메시지
                window.location.href = '/main/home'; // 홈페이지로 리다이렉트
            })
            .catch(error => {
                // 로그아웃 요청이 실패한 경우에 대한 처리를 수행합니다.
                console.error('로그아웃 요청 실패:', error);
                // 예를 들어, 에러 메시지를 표시하거나 다시 시도할 수 있는 버튼을 보여줄 수 있습니다.
            });
    }

</script>

</body>
</html>